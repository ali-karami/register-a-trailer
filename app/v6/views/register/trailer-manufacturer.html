{% extends "layout-v6.html" %}

{% block page_title %} Enter trailer manufacturer {% endblock %}

{% block head %}
    {% include "includes/head.html" %}
    {% include "includes/scripts/default.html" %}
    <style type="text/css">
        .autocomplete-wrapper {
            max-width: 20em;
            margin-bottom: 2rem;
        }
    </style>
    <!-- <script type="text/javascript" src="/public/v6/javascripts/manufacturers.js"></script> -->
{% endblock %}

{% block after_header %}
    {% include "includes/phase-banner/standard-back.html" %}
{% endblock %}





{% block content %}
    <main id="content" role="main">
        <div class="grid-row">
            <div class="column-two-thirds">
                {% include "includes/errors/error-summary.html" %}

                <div class="form-group">
                    <fieldset>
                        <legend>
                            <h1 class="heading-large"><span class="title">Enter trailer manufacturer</span></h1>
                        </legend>
                        {% include "includes/errors/error-message.html" %}

                        <label class="form-label visually-hidden" for="manufacturer">Trailer manufacturer</label>
                        <!-- <label for="autocomplete-default">Select your country</label> -->
                        <div id="tt-default" class="autocomplete-wrapper"></div>
                        <!-- <input class="form-control" id="manufacturer" type="text" name="manufacturer"> -->

                        <!-- <label class="form-label visually-hidden" for="manufacturer">Manufacturer</label>
                        <input class="form-control" id="manufacturer" type="text" name="manufacturer"> -->
                    </fieldset>

                    <p><a href="/register/trailer-manufacturer-manual">Manufacturer not listed</a></p>
                </div>

                {% include "includes/buttons/continue.html" %}

                <a href="/register/trailer-summary" class="cancel-button">Cancel and go to trailers pending payment</a>
            </div>
        </div>
    </main>
{% endblock %}





{% block body_end %}
    {% include "includes/scripts/trailer-manufacturer-accordion.html" %}

    <script type="text/javascript">
        $('h1').click(function() {
            var manufacturer = randomManufacturer();
            $('input[name=input-autocomplete]').val(manufacturer);
        });

        $(document).ready(function () {
            getPendingTrailers();
            if (pendingTrailers == 0) {
                $('.cancel-button').hide();
            } else {
                $('.cancel-button').show();
            }
        });

        var list = [
            'A.R.B',
            'A1 International',
            'Abel',
            'Adcliffe',
            'Adcliffe Drawdeal Ltd',
            'AHP',
            'Andover',
            'Andover Trailers Ltd',
            'Arthur Hingley Trailers',
            'Artic Falkirk',
            'Avalux Ltd',
            'Bale Fabrications',
            'Bartoletti',
            'Belle Coachworks Ltd',
            'Benalu',
            'Berdex',
            'Berger Fahrzeugtechnik Ges.m.b.H.',
            'BMI Trailers',
            'Boughton International',
            'Britcom International',
            'Brookland Speed',
            'Brookland Engineering',
            'Broshuis',
            'Burg',
            'Caldal',
            'S. Cartwright & Sons (Coachbuilders) Ltd',
            'Chassis Development Services Ltd',
            'Chereau',
            'Chieftain',
            'Jean Chéreau SAS',
            'Chieftain Trailers Ltd',
            'Cisternas COBO UK Ltd',
            'Clayden',
            'Clayton Commercials',
            'COBO HNOS',
            'Concept Trailers',
            'Corus',
            'Couldwell',
            'County Trucking',
            'CPS Mechanisation',
            'Crossland',
            'Crossland Tankers Ltd',
            'D-TeC Products B.V.',
            'Delta/VSS Kocise',
            'Dennis',
            'Dennison Trailers Ltd',
            'Don-Bur (Bodies & Trailers) Ltd',
            'Dyson',
            'Estepe SpeciaL Truck Products B.V.',
            'Feber Intercar',
            'Faymonville AG',
            'Feldbinder UK Ltd',
            'Feldbinder Spezialfahrzeugwerke',
            'F G M s.r.l.',
            'Fliegl Fahrzeugbau GmbH',
            'Fruehauf',
            'Frutiger CZ s.r.o.',
            'GOFA-Gocher Fahrzeugbau GmbH',
            'Goldhofer',
            'Granalu Transformations SL',
            'Gray & Adams Ltd',
            'GRW',
            'Gurlesenyil Treyler',
            'Hammar Maskin AB',
            'Houghton Parkhouse Ltd',
            'Hunwick Engineering Ltd',
            'Ifor Williams Trailers Ltd',
            'JPM Trailers Ltd',
            'Kässbohrer Fahrzeugwerke GmbH',
            'Kel-Berg Trailers & Trucks Ltd',
            'King Trailers Ltd',
            'Knapen Trailers B.V.',
            'Kögel Trailer GmbH & Co. KG',
            'Kraker Trailers',
            'Fahrzeugwerk Bernard Krone GmbH',
            'LAG Trailers NV',
            'Lakeland Tankers Ltd',
            'Langendorf GmbH',
            'Lawrence David Ltd',
            'Leci Trailers',
            'Legras Industries',
            'Lintrailers B.V.',
            'Lohr',
            'M & G Trailers',
            'M1 Engineering Ltd',
            'SMFF Magyar',
            'Maisonneuve S.A.S',
            'McCauley Trailers Ltd',
            'Mega Sp. Z o.o.',
            'Micra Truck Bodies Ltd',
            'Montracon Ltd',
            'Muldoon Transport Systems Ltd',
            'NC Engineering',
            'NC Sludge',
            'NCS Trailers',
            'Nooteboom Trailers B.V.',
            'Oldbury',
            'OMEPS s.r.l',
            'Overlander',
            'Pacton Trailers B.V.',
            'Paneltex Martrans',
            'Panema Trailers (Eng) Ltd',
            'Parcisa, S.L.U.',
            'Pezzaioli',
            'Carrozzeria Pezzaioli s.r.l.',
            'Piacenza',
            'Plowman Brothers Ltd',
            'Polski',
            'Priden Engineering Ltd',
            'Quiacrix (Parcisa) SLU',
            'Raven',
            'Ray Goudy',
            'Ray Smith',
            'Reload Systems',
            'Renders',
            'R M Trailers',
            'Road Tankers Northern Ltd',
            'Robinson',
            'Robinson Distribution',
            'Rojo',
            'Rolfo',
            'Rothdean',
            'Royen',
            'RTS Trailmaster',
            'Sayers Road Tankers',
            'Schmitz',
            'SDC Trailers Ltd',
            'Solomon Commercials Ltd',
            'Sommer GmbH',
            'Spitzer',
            'STAS',
            'Stokota',
            'Talson Trailers B.V.',
            'TCL',
            'Terex',
            'Tirsan',
            'Titan',
            'Tiger Trailers Ltd',
            'Trail-Fab',
            'Trailor',
            'Transport Engineering',
            'Transporter Enterprises',
            'Trent',
            'Triffitt',
            'Truckmate',
            'TTS',
            'Turbos Hoet',
            'Turner',
            'Unique',
            'United',
            'Utility',
            'Vallelly',
            'Van der Peet',
            'Van Hool',
            'Vipex',
            'Vlastuin Rolling Equipment B.V.',
            'Ward Fabrications',
            'Weightlifter Bodies Ltd',
            'Weightmaster',
            'Welgro',
            'Whale Tankers Ltd',
            'Wheelbase',
            'Wielton S.A.',
            'Wilcox',
            'Wilcox Commercial Vehicles Ltd',
            'Wilson',
            'Woolf Eng',
            'Wraith',
            'York',
            'ZVVZ Machinery'
        ]

        $('.button').click(validate);

        function validate() {
            var validInput = true;
            var value = $('input[name=input-autocomplete]').val();

            if (!value) {
                validInput = false;
            } else if (value) {
                for (i = 0; i < list.length; i++) {
                    if (value == list[i]) {
                        validInput = true;
                        console.log ("true");
                        break;
                    } else {
                        console.log ("false");
                        validInput = false;
                    }
                }
            }

            if (validInput) {
                if (changing == "true") {
                    member.trailers[member.currentTrailerPosition].manufacturer = value;
                    console.log('manufacturer = ' + currentTrailer.manufacturer);
                    go('/register/trailer-summary');
                } else {
                    member.trailer.manufacturer = value;
                    console.log('manufacturer = ' + member.trailer.manufacturer);
                    if (!member.trailer.check) {
                        go('/register/trailer-weights');
                    } else {
                        go('/register/saving-trailer');
                    }
                }
            } else {
                hideErrors();
                showErrors();
                $('.error-summary-list li a').html('Provide a manufacturer to continue');
                $('.error-message').html('Provide a manufacturer');
            }
        }

        // If coming from check your answers page
        var changing = location.search.split('change=')[1];
        if (changing === 'true') {
            document.title = 'Change trailer manufacturer';
            $('input[name=input-autocomplete]').val(currentTrailer.manufacturer);
            // $('.button-back').hide();
            $('.title').html('Change trailer manufacturer');
            $('button').html('Save and continue');
        }
    </script>
{% endblock %}